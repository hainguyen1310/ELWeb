
!function () { try { var e = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}, n = (new Error).stack; n && (e._sentryDebugIds = e._sentryDebugIds || {}, e._sentryDebugIds[n] = "dcbdb637-e290-5ade-919a-ef184b74a0d0") } catch (e) { } }();
(() => { var t = { 9533: (t, e, n) => { "use strict"; n.d(e, { Di: () => c, RK: () => i, Rg: () => a, lp: () => d }); var o = n(9246), r = n(95); async function a(t, e) { const n = e || "", a = (0, o.Z)() || ""; return await (0, r.Mo)(fetch(`https://candyrack.digismoothie.app/api/candyrack/offers?shop=${window.Shopify.shop}&product=${t.id}&product_variant=${n}&lang=${a}`)) } function i(t, e, n) { const o = { shop: window.Shopify.shop, discount_codes: t, product_ids: e, variant_ids: n }, a = (0, r.CT)(o); return (0, r.mN)(fetch(`https://candyrack.digismoothie.app/api/candyrack/covered-by-discount?${a}`)) } async function c(t, e, n) { return (await (0, r.mN)(fetch("https://candyrack.digismoothie.app/api/candyrack/generate-discount", { method: "POST", mode: "cors", headers: { "Content-Type": "application/json; charset=utf-8" }, body: JSON.stringify({ shop: t, entitled_product_id: n, offer: e }) }))).discount_code } async function d(t) { if (!t) return; const e = { shop: window.Shopify.shop, variant_id: t }, n = (0, r.CT)(e); return (await (0, r.mN)(fetch(`https://candyrack.digismoothie.app/api/candyrack/product-handle-for-variant?${n}`))).handle } }, 4717: (t, e, n) => { "use strict"; n.d(e, { B1: () => l, HR: () => u, Py: () => s, QW: () => f, Xq: () => c, dv: () => i, h2: () => d, ir: () => p, wv: () => a }); var o = n(95), r = n(9957); function a(t) { const e = window.location.pathname, n = (0, o.Z9)(e); return (0, o.mN)(fetch(`${n}/products/${t}.js`)) } function i() { return (0, o.mN)(fetch(`/cart.js?_=${(new Date).getTime()}`)) } function c(t, e, n) { if (!t) return; const r = { quantity: e, id: t }; return n && (r.properties = n), (0, o.mN)(fetch("/cart/add.js", { ...o.Pj, body: JSON.stringify(r) })) } async function d(t, e) { if (!t) return; const n = { quantity: e || 0, id: String(t) }; return (0, o.mN)(fetch("/cart/change.js", { ...o.Pj, body: JSON.stringify(n) })) } function s(t, e) { let n = 0, o = 0; return t.map((t => { const r = { ...t, offer: e[n] }; return o + 1 === e[n].recommended_product_count ? (o = 0, n++) : o++, r })) } function u(t) { const e = { updates: t }; return (0, o.mN)(fetch("/cart/update.js", { ...o.Pj, body: JSON.stringify(e) })) } function l(t) { const e = { attributes: t }; return fetch("/cart/update.js", { ...o.Pj, body: JSON.stringify(e) }) } async function f() { var t, e; const n = null !== (t = "https://candyrack.digismoothie.app/") && null !== (e = t.trim()) && void 0 !== e && e.length ? "https://candyrack.digismoothie.app/" : "", r = window.Shopify.shop; return await (0, o.TS)(fetch(`${n}api/apps-info/?shop=${r}`)) } async function p(t, e, n, a) { const i = (0, o.Z9)(window.location.pathname); try { const r = await h(i, t, a, n, window.CANDYRACK_IS_SMART_OFFER_RELATED_INTENT_PREFERRED ? "related" : "complementary"); if ((null === r || void 0 === r ? void 0 : r.length) > 0) return r; const c = await h(i, t, a, n, window.CANDYRACK_IS_SMART_OFFER_RELATED_INTENT_PREFERRED ? "complementary" : "related"); if ((null === c || void 0 === c ? void 0 : c.length) > 0) return c; const d = (0, o.BH)(window.location.pathname); return await (0, o.mN)(fetch(`${e.hostname}api/${e.appPrefix}/smart-upsell-fallback?shop=${window.Shopify.shop}&lang=${d}`)) } catch (c) { return (0, r.P)(c), [] } } async function h(t, e, n, r) { var a; let i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "related"; const c = await (0, o.mN)((0, o.BB)(`${t}/recommendations/products.json?product_id=${e}&limit=${n}&intent=${i}`, 3e3)); return null === c || void 0 === c || null === (a = c.products) || void 0 === a ? void 0 : a.filter((t => !t.tags.includes(r))) } }, 2574: (t, e, n) => { "use strict"; n.d(e, { Bw: () => a, E0: () => r, F2: () => c, eE: () => i }); const o = new Map([["order_cannot_be_edited", "We couldn\u2019t add the item to the order. Maybe the order has been fulfilled already? Please contact us for more details."], ["invalid_input_data", "We couldn\u2019t add the item to the order. Please refresh the page and try it again."], ["variant_id_not_unique", "We couldn\u2019t add the item to the order. Please contact us for more details."], ["offer_does_not_exist", "We couldn\u2019t add the item to the order as the offer is not valid anymore. Please contact us for more details."]]); class r { transpile(t) { return o.get(t) || t } constructor(t) { this.errorCode = void 0, this.errors = void 0, this.message = void 0, i(t) ? (this.errorCode = t.name, this.message = t.message) : (this.errorCode = t.error_code, this.errors = t.errors, this.message = this.transpile(t.error_code)) } static transform(t) { return new r(t) } } const a = t => void 0 !== (null === t || void 0 === t ? void 0 : t.error_code), i = t => void 0 !== (null === t || void 0 === t ? void 0 : t.message); let c; !function (t) { t.CR_IGNORE = "cr-ignore", t.LU_IGNORE = "lu-ignore", t.CC_IGNORE = "cc-ignore" }(c || (c = {})) }, 95: (t, e, n) => { "use strict"; n.d(e, { BB: () => l, BH: () => s, CT: () => a, Mo: () => c, Pj: () => r, TS: () => d, Z9: () => u, mN: () => i }); var o = n(2574); const r = { method: "POST", credentials: "same-origin", headers: { "Content-Type": "application/json; charset=utf-8" } }; function a(t) { const e = new URLSearchParams; for (const [n, o] of Object.entries(t)) Array.isArray(o) ? o.forEach((t => e.append(n, String(t)))) : e.append(n, String(o)); return e.toString() } async function i(t) { const e = await t; if (e.status >= 500) throw Error("Something unexpected happened."); return 404 === e.status ? null : await e.json() } async function c(t) { const e = await t; if (!e.ok) throw new Error(`Request failed with status ${e.status}: ${e.statusText}`); return await e.json() } async function d(t) { const e = await t; let n = null, r = !1; try { n = await e.json() } catch (a) { r = !0 } return e.status >= 400 && (!(0, o.Bw)(n) || r) ? { error_code: "It's not you, it's us!", errors: [] } : n } function s(t) { if (window.CANDYRACK_DISABLE_LOCALE) return ""; if (t.includes("checkout")) { const e = t.split("/"), n = e[e.length - 2]; return 2 === n.split("-")[0].length ? n : "" } const e = /^\/([a-z]{2}(?:-[a-z]{2})?)(?:\/|$)/gi.exec(t); return e && e[0] ? `${e[1]}` : "" } function u(t) { const e = s(t); return e ? `/${e}` : "" } async function l(t, e) { return new Promise(((n, o) => { if (fetch(t).then(n, o), e) { const t = new Error(`Response exceeded ${e / 1e3} second threshold`); setTimeout(o, e, t) } })) } }, 2371: (t, e, n) => { "use strict"; n.d(e, { Z: () => a }); var o = n(8246), r = n(95); const a = async (t, e) => { try { return await (0, r.mN)(fetch("https://chunk-errors-monitoring.herokuapp.com/api/chunk-error/", { method: "POST", mode: "cors", headers: { "Content-Type": "application/json; charset=utf-8" }, body: JSON.stringify({ app_id: t, shop: e }) })) } catch (n) { (0, o.Z)(n) } } }, 5767: (t, e, n) => { "use strict"; var o; n.d(e, { j: () => o }), function (t) { t.CANDYCART = "candycart", t.CANDYRACK = "candyrack", t.LAST_UPSELL = "last_upsell" }(o || (o = {})) }, 6919: (t, e, n) => { "use strict"; n.r(e), n.d(e, { default: () => i }); var o = n(5767), r = n(9957), a = n(2371); function i() { let t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; window.CandyCart.isLoading && (document.getElementById("candycart-root") ? (0, r.P)("root is already present.", o.j.CANDYCART) : n.e(5).then(n.bind(n, 5342)).then((e => { let { default: n } = e; return n(t) })).catch((() => (0, a.Z)(o.j.CANDYCART, window.Shopify.shop)))) } }, 4993: (t, e, n) => { "use strict"; n.d(e, { $c: () => i, Je: () => a, Q2: () => r, dp: () => c }); var o = n(9957); function r(t) { try { const e = t.closest("form"), n = null === e || void 0 === e ? void 0 : e.attributes.getNamedItem("action"); return !n || "/checkout" !== n.value } catch (e) { return (0, o.H)("filterCheckoutForms", e), !0 } } function a() { return [".add-to-cart", ".add_to_cart", ".add-to-cart-button", ".add_to_cart_button", ".button-add-to-cart", ".button_add_to_cart", ".add-to-cart-btn", ".add_to_cart_btn", ".btn-add-to-cart", ".btn_add_to_cart", ".addToCart", ".AddToCart", ".AddtoCart", ".addtocart", ".btn-addtocart", ".btn--sticky_addtocart", ".qsc-btn--add-to-cart", "#add-to-cart", "#add-to-cart-btn", "#btn-add-to-cart", "#addToCartButton", "#addToCartBtn", "#btnAddToCart", "#AddToCart", "#shopify_add_to_cart"].reduce(((t, e) => (t.push(`button${e}:not(.cr-ignore)`), t.push(`input${e}:not(.cr-ignore)`), t.push(`a${e}:not(.cr-ignore)`), t)), ['form[action*="/cart/add"] button[type=submit]:not(.shopify-payment-button__button):not(.shopify-payment-button__more-options)', 'form[action*="/cart/add"] input[type=submit]', 'a[href*="/cart/add"]', 'form[action="/cart/add"] #button-cart', ".product-atc-btn", 'form[action="/cart/add"] .shg-btn', 'form[action*="/cart/add"] [data-product-add]', ".btn--add-to-cart", ".product-form--atc-button", ".cart__checkout-btn", ".product-atc__button", ".complete-design-a", ".product_buttonContainer-addToCart a", "#mwAddToCart", 'button[data-zp-link-type="cart"]', 'button[data-pf-type="ProductATC"]', '[data-action="add-to-cart"]', '[data-action="AddToCart"]', "[name=add]", "[name=addToCart]", "[name=AddToCart]", ".g-stickybar-buynow", ".product-form--add-to-cart", ".product-form__cart-submit", ".addCart", ".product-form__cart-submit div", ".addtocart-button-active", "button.product-page-add-to-cart"].map((t => `${t}:not(.cr-ignore)`)).concat(window.CANDYRACK_CUSTOM_BUTTON_SELECTORS || [])).join(", ") } function i() { return ['button[name="checkout"]', 'input[name="checkout"]', 'form[action="/checkout"] [type="submit"]', '[href*="checkout"]', '[href$="checkout"]', 'button[value="Checkout"]', 'input[value="Checkout"]'].map((t => `${t}:not(.candy-cloned)`)).concat(window.CANDYCART_CUSTOM_BUTTON_SELECTORS || []).join(",") } function c(t) { return 1 === (null === t || void 0 === t ? void 0 : t.length) ? t[0] : Array.isArray(t) ? t.join(", ") : t } }, 5907: (t, e, n) => { "use strict"; n.d(e, { J_: () => a, sO: () => c, ZP: () => d }); const o = function (t) { let e; try { e = window[t]; const n = "__storage_test__"; return e.setItem(n, n), e.removeItem(n), !0 } catch (n) { return !1 } }; function r() { return new Proxy({}, { get: function (t, e) { return e in t ? t[e] : null } }) } class a { get length() { return this.__storage ? Object.keys(this.__storage).length : window[this.__type].length } constructor() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "localStorage"; this.__storage = void 0, this.__type = void 0, this.__type = t, this.__storage = o(t) ? null : r() } key(t) { if (this.__storage) { const e = Object.keys(this.__storage); return e.length <= t || t < 0 ? null : e[t] } return window[this.__type].key(t) } getItem(t) { return this.__storage ? this.__storage[t] : window[this.__type].getItem(t) } clear() { this.__storage && (this.__storage = r()), window[this.__type].clear() } removeItem(t) { this.__storage && delete this.__storage[t], window[this.__type].removeItem(t) } setItem(t, e) { this.__storage ? this.__storage[t] = e : window[this.__type].setItem(t, e) } } const i = new a, c = new a("sessionStorage"), d = i }, 146: (t, e, n) => { "use strict"; let o; n.d(e, { r$: () => o, ke: () => r, v3: () => a, I9: () => i }), function (t) { t.CANDY_RACK_PRODUCTS = "products", t.CANDY_RACK_COLLECTIONS = "collections", t.LAST_UPSELL = "checkouts" }(o || (o = {})); const r = t => { var e; return void 0 !== (null === (e = t.buttons) || void 0 === e ? void 0 : e.reject) }, a = t => !(void 0 !== t.ajax_cart_watcher_selector) && "grid" === t.popup_layout, i = t => a(t) ? "-grid" : "" }, 8980: (t, e, n) => { "use strict"; n.d(e, { n6: () => f, sp: () => v, rm: () => l, Xi: () => p, a9: () => m, LM: () => h, tA: () => y }); var o = n(5907), r = n(6591), a = n(146); function i() { const t = window.location.pathname.match(/[0-9]+\/orders|checkouts\/[A-Za-z0-9]+/); return !(null === t || void 0 === t || !t.length) } function c(t) { return window.location.pathname.includes(t) } var d = n(4993), s = n(6995), u = n(5767); function l() { f.isBaseApp() && (o.ZP.removeItem(r.Gv), o.ZP.removeItem(r.xY)) } const f = { isBaseApp: () => "true" === o.ZP.getItem(r.CN) || "false" !== o.ZP.getItem(r.CN) && Boolean("https://candyrack.digismoothie.app/".trim().length > 0), isForkedApp: () => "true" !== o.ZP.getItem(r.CN) && ("false" === o.ZP.getItem(r.CN) || Boolean("false" === o.ZP.getItem(r.CN) || "")), isCandyRackExistingAndNotLoading: t => { var e, n; return (null === (e = t.candyrack) || void 0 === e ? void 0 : e.is_installed) && !(null !== (n = window.CandyRack) && void 0 !== n && n.isLoading) } }; function p(t, e) { return f.isCandyRackExistingAndNotLoading(t) && function (t) { return t.isEnabled || i() }(e) } function h(t, e) { return f.isBaseApp() && f.isCandyRackExistingAndNotLoading(t) && e.isEnabled } function m(t) { var e; const n = t.candyrack && t.candyrack.is_installed && t.candyrack.is_checkout_button_offers_existing; return (f.isBaseApp() && (n || (0, s.by)(u.j.CANDYRACK)) || f.isForkedApp() && t.candycart.is_installed && !n) && !(null !== (e = window.CandyCart) && void 0 !== e && e.isLoading) && !i() } function y(t) { var e, n; const o = t.candyrack && t.candyrack.is_installed && t.candyrack.is_thank_you_page_offers_existing; return (f.isBaseApp() && o || (null === (e = t.last_upsell) || void 0 === e ? void 0 : e.is_installed) && f.isForkedApp() && !o) && i() && !(null !== (n = window.LastUpsell) && void 0 !== n && n.isLoading) } const v = () => { if (c(a.r$.CANDY_RACK_PRODUCTS) || c(a.r$.CANDY_RACK_COLLECTIONS) || (0, d.$c)().length > 0 || window.CANDYRACK_FORCE_LOAD) return { isEnabled: !0, shouldRender: !0 }; if (window.location.pathname.includes("cart")) { const t = o.ZP.getItem(r.pt), e = o.ZP.getItem(r.fu), n = o.ZP.getItem(r.dC); return e || n || t ? { isEnabled: !0, shouldRender: !1 } : { isEnabled: !1, shouldRender: !1 } } return { isEnabled: !1, shouldRender: !1 } } }, 9980: (t, e, n) => { "use strict"; n.d(e, { E7: () => l, E9: () => s, Hh: () => h, KL: () => y, OD: () => v, PC: () => f, XG: () => m, ZJ: () => p, zD: () => g }); var o = n(4717), r = n(5907), a = n(6591), i = n(5767), c = n(9957), d = n(6995); const s = "candyrack-associated-products-for-removal", u = "candyrack-translations"; function l(t, e, n) { t.shopifyProductVariantIdComputedInFE && (r.ZP.setItem(a.fu, JSON.stringify({ ...f(), [t.shopifyProductVariantIdComputedInFE]: e })), t.remove_upsell_product_when_parent_product_is_removed && r.ZP.setItem(s, JSON.stringify({ ...p(), [t.shopifyProductVariantIdComputedInFE]: { handle: e, quantity: t.quantityComputedInFE, parentProductVariantId: n } }))) } function f() { const t = r.ZP.getItem(a.fu); if (t) try { return JSON.parse(t) } catch { return {} } return {} } function p() { const t = r.ZP.getItem(s); if (t) try { return JSON.parse(t) } catch { return {} } return {} } function h(t) { r.ZP.setItem(u, JSON.stringify(t)) } function m(t) { const { cart_discount_note: e } = function () { const t = r.ZP.getItem(u) || ""; let e = { cart_discount_note: "Discount AMOUNT will be applied at checkout." }; try { var n; const o = JSON.parse(t); null !== (n = o.text) && void 0 !== n && n.cart_discount_note && (e.cart_discount_note = o.text.cart_discount_note) } catch { } return e }(); document.querySelectorAll("[candyrack-cart-info]").forEach((t => t.remove())), t.forEach((t => { t.covered_variant_ids.forEach((t => { var n; const o = null === (n = (0, d.Md)().find((e => e.variantId === t))) || void 0 === n ? void 0 : n.discount; o && function (t, e) { const n = Array.from(document.querySelectorAll(`a[href$="${t}"]`)); let o = n.filter((t => !t.firstElementChild || "IMG" !== t.firstElementChild.tagName)); 0 === o.length && (o = n); o.length > 0 && ((0, c.P)(`Attaching discount message ${e} for variant ${t}`, i.j.CANDYRACK), o[o.length - 1].insertAdjacentHTML("afterend", `<div candyrack-cart-info style="font-size: 12px;">${e}</div>`)) }(t, e.replace("AMOUNT", o)) })) })) } function y() { (0, c.P)("Clear associated storage products information", i.j.CANDYCART), r.ZP.removeItem(a.fu) } async function v(t) { g(await (0, o.dv)(), t) } function g(t, e) { for (const n of Object.keys(f())) if (!t.items.find((t => t.variant_id === Number(n)))) { (0, c.P)(`Variant ${n} not found. Removing association info...`, e); const t = f(); delete t[n], r.ZP.setItem(a.fu, JSON.stringify(t)) } !function (t, e) { var n; if (null !== (n = window.CandyRack) && void 0 !== n && n.popupOpen) return void (0, c.P)("not checking removeUpsellProductWhenParentProductIsRemoved because modal is open", e); const a = p(); let i = {}; const d = {}; for (const o of Object.keys(a)) { (0, c.P)(`Checking variant ${o}`, e); const n = t.items.find((t => t.handle === a[o].handle && t.variant_id === a[o].parentProductVariantId)), r = t.items.find((t => t.variant_id === Number(o))), s = (null === n || void 0 === n ? void 0 : n.variant_id) === Number(o) && (null === n || void 0 === n ? void 0 : n.quantity) <= a[o].quantity, u = !n || 1 === t.items.filter((t => t.variant_id === n.variant_id)).length; if (!n && r || s && u) { (0, c.P)(`Parent ${a[o].handle} not found. Removing upsell product...`, e); let t = r.quantity - a[o].quantity; t = t < 0 ? 0 : t, i[r.variant_id] = t } else d[o] = a[o] } r.ZP.setItem(s, JSON.stringify(d)), Object.keys(i).length > 0 && Promise.resolve((0, o.HR)(i)).then((() => window.location.reload())) }(t, e) } }, 6591: (t, e, n) => { "use strict"; n.d(e, { CN: () => s, Gv: () => c, dC: () => o, fu: () => a, pt: () => r, rh: () => d, xY: () => i }); const o = "candyrack-discount-code", r = "candyrack-discounted-products", a = "candyrack-associated-products", i = "candycart-discount-code", c = "candycart-discounted-product", d = "candyrack-offset-value", s = "is-candyrack-base-app-for-test-purposes" }, 6995: (t, e, n) => { "use strict"; n.d(e, { Tc: () => N, t9: () => I, cO: () => b, Y4: () => w, Md: () => A, iz: () => P, by: () => _, TS: () => y, hZ: () => m, es: () => p, KF: () => h, nK: () => v }); var o = n(5767), r = n(9533), a = n(4717), i = n(5907), c = n(9980), d = n(6591), s = n(9957); function u(t, e) { let n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; var o, r, a, i, c = 0; return function () { o = this, r = arguments; var t = new Date - c; return i || (t >= e ? (n && d(), i = setTimeout(d, e)) : i = setTimeout(d, e - t)), a }; function d() { i = 0, c = +new Date, a = t.apply(o, r), o = null, r = null } } const l = "form[action*='/checkout'], form[action*='/cart'], form[action*='/a/checkout']", f = 5; async function p(t, e, n, r, a) { (0, s.P)(`Saving discount code, discounted price ${n}, discount: ${r}`, o.j.CANDYRACK); const c = i.ZP.getItem(d.dC) || "", u = c.split(",").length; if (!c.includes(t) || u > f) { const e = 0 === c.trim().length ? t : `${c},${t}`; i.ZP.setItem(d.dC, e), v(o.j.CANDYRACK) } const l = A(); i.ZP.setItem(d.pt, JSON.stringify([...l, { variantId: e, discountedPrice: n, code: t, discount: r, relatedProductId: a }])) } function h(t, e) { const n = i.ZP.getItem(d.dC) || ""; (0, s.P)(`Current discounts in storage: ${n}`, o.j.CANDYCART); const r = n.split(",").length; if (r > f) return void (0, s.P)(`Too many discounts: ${r}. Returning.`, o.j.CANDYCART); if (!n.includes(t)) { const e = 0 === n.trim().length ? t : `${n},${t}`; (0, s.P)(`Discounts saved in storage after addition: ${e}`, o.j.CANDYCART), i.ZP.setItem(d.dC, e) } const a = JSON.parse(i.ZP.getItem(d.Gv) || "[]"); i.ZP.setItem(d.Gv, JSON.stringify([...a, { variantId: e, discount: t }])) } function m(t, e) { const n = i.ZP.getItem(d.dC) || ""; (0, s.P)(`Current discounts: ${n}`, o.j.CANDYCART); const r = JSON.parse(i.ZP.getItem(d.Gv) || "[]").filter((t => t.variantId !== e)); if (!r.find((e => e.code === t))) { const e = n.split(",").filter((e => e !== t)).join(","); i.ZP.setItem(d.dC, e), (0, s.P)(`Discount ${t} not used by other products, removed. Updated discounts: ${e}`, o.j.CANDYCART) } i.ZP.setItem(d.Gv, JSON.stringify(r)) } function y(t, e) { const n = i.ZP.getItem(d.dC) || ""; (0, s.P)(`Current discounts: ${n}`, o.j.CANDYRACK); const r = A().filter((t => t.variantId !== e)); if (!r.find((e => e.code === t))) { const e = n.split(",").filter((e => e !== t)).join(","); i.ZP.setItem(d.dC, e), (0, s.P)(`Discount ${t} not used by other products, removed. Updated discounts: ${e}`, o.j.CANDYRACK) } i.ZP.setItem(d.pt, JSON.stringify(r)) } function v(t) { C(t), k(t) } function g(t) { let e = null; return o.j.CANDYRACK === t && (e = i.ZP.getItem(d.dC)), e || "" } function _(t) { return g(t).trim().split(",").length > 1 } function w(t) { var e; const n = null === (e = g(t)) || void 0 === e ? void 0 : e.trim(); if (!n) return ""; return n.split(",").map((t => encodeURIComponent(t))).join(",") } function C(t) { const e = g(t), n = e.split(","); o.j.CANDYRACK === t && async function (t) { if ((0, s.P)("Showing discount info in cart", o.j.CANDYRACK), !t.trim()) return void (0, s.P)("No discount, returning.", o.j.CANDYRACK); if (!document.querySelector("a[href*='?variant=']")) return void (0, s.P)("No variant, returning.", o.j.CANDYRACK); const e = await (0, a.dv)(); if (0 === e.items.length) return; const n = e.items.map((t => t.product_id)), i = e.items.map((t => t.variant_id)), d = t.split(","), u = await (0, r.RK)(d, n, i); (0, c.XG)(u) }(e), window.chCouponCode = e; const i = document.querySelectorAll(l); n.length > 1 || "" === n[0] ? Array.from(i).forEach((e => { const n = e.querySelector("[name=discount]"); n && ((0, s.P)(`Removing discount input ${n}`, t), n.remove()) })) : Array.from(i).forEach((n => { const o = n.querySelector("[name=discount]"); if (o) { if ("" === o.value.trim() && " " !== e) { const n = e ? encodeURIComponent(e) : e; (0, s.P)(`New discount input value ${n}`, t), o.value = n } } else (0, s.P)(`Inserting discount input ${o}`, t), n.insertAdjacentHTML("beforeend", `<input type="hidden" name="discount" value="${e}" />`) })) } function k(t) { const e = w(t), n = window.Weglot && window.Weglot.getCurrentLang(), o = `/checkout?discount=${e}${n ? `&locale=${n}` : ""}`; function r(t) { t.preventDefault(), t.stopImmediatePropagation(), (0, s.P)(`Checkout click handler, redirecting to ${o}`), window.location.href = o } const a = document.querySelectorAll('[href^="/checkout"],[name=return_to][value^="/checkout"],button[onclick],[data-component-checkout-button]'); Array.from(a).forEach((t => { var e, n; t instanceof HTMLAnchorElement && (t.href = o), t instanceof HTMLInputElement && (t.value = o), t instanceof HTMLButtonElement && null !== (e = t.attributes.getNamedItem("onclick")) && void 0 !== e && null !== (n = e.value) && void 0 !== n && n.match(/location.*checkout/) && (t.onclick = r), t instanceof HTMLButtonElement && t.attributes.getNamedItem("data-component-checkout-button") && (t.onclick = r) })) } function b() { (0, s.P)("Clear discount codes information", o.j.CANDYRACK), i.ZP.removeItem(d.dC), i.ZP.removeItem(d.pt) } function A() { const t = i.ZP.getItem(d.pt); if (t) try { return JSON.parse(t) } catch { return [] } return [] } function P(t) { v(t), function (t) { const e = u((() => C(t)), 1e3, !0), n = u((() => k(t)), 1e3, !0), o = u((() => (0, c.OD)(t)), 3e3), r = function (t) { n(), o(); for (const n of t) if ("childList" === n.type) for (var r of n.addedNodes) (r.action && (r.action.indexOf("/cart") > -1 || r.action.indexOf("/checkout") > -1 || r.action.indexOf("/a/checkout") > -1) || r.querySelector && r.querySelector("a[href*='?variant=']")) && e() }; try { const t = new MutationObserver(r), e = document.body; t.observe(e, { childList: !0, subtree: !0 }) } catch (a) { (0, s.H)("Failed to setup drawer cart observer", t, a) } }(t) } function N(t, e, n, o, r) { if (o) { const o = "fixed_amount" === n ? e : t * e / 100, a = t - o; return (0, s.P)(`Discount of ${o} applied, returning discountedPrice : ${a}`, r), a } return (0, s.P)(`Discount is not set to be applied, returning original variantPrice : ${t}`, r), t } async function I(t, e) { const n = A(); let o = !1; n.forEach((n => { t.items.find((t => Number(t.variant_id) === Number(n.variantId))) || (o = !0, y(n.code, Number(n.variantId))); t.items.find((t => Number(t.product_id) === Number(n.relatedProductId))) || (o = !0, y(n.code, Number(n.variantId)), (0, s.P)(`Related product ${n.variantId} not found. Removing discount info...`, e), C(e)) })), o && ((0, s.P)("Resetting cart-level discounts", e), await fetch("/discount/candyrack-invalid-discount_G5STF1", { credentials: "same-origin", redirect: "manual" })) } }, 9246: (t, e, n) => { "use strict"; n.d(e, { Z: () => o }); const o = () => { var t; const e = { Weglot: () => { var t; return null === (t = window.Weglot) || void 0 === t ? void 0 : t.getCurrentLang() }, langify: () => { var t, e; return null === (t = window.langify) || void 0 === t || null === (e = t.locale) || void 0 === e ? void 0 : e.iso_code }, GTranslateGetCurrentLang: () => window.GTranslateGetCurrentLang(), LangShop: () => { var t, e, n; return (null === (t = window.LangShop) || void 0 === t ? void 0 : t.currentLanguage) || (null === (e = window.LangShop) || void 0 === e || null === (n = e.getCurrentLanguage()) || void 0 === n ? void 0 : n.code) } }; for (const [n, o] of Object.entries(e)) if (window[n]) return o() || window.Shopify.locale; return null === (t = window.Shopify) || void 0 === t ? void 0 : t.locale } }, 9957: (t, e, n) => { "use strict"; n.d(e, { H: () => d, P: () => s }); var o = n(5767), r = n(5907); const a = "candyrack-debug"; let i = !0; try { i = !!r.ZP.getItem(a) } catch { } function c(t) { return t ? `${t}: ` : "Could not determine app: " } function d(t, e) { const n = "string" === typeof t ? c(e) + t : t; for (var o = arguments.length, r = new Array(o > 2 ? o - 2 : 0), a = 2; a < o; a++)r[a - 2] = arguments[a]; console.error(n, ...r) } function s(t, e) { if (!i) return; const n = "string" === typeof t ? c(e) + t : t; for (var o = arguments.length, r = new Array(o > 2 ? o - 2 : 0), a = 2; a < o; a++)r[a - 2] = arguments[a]; console.info(n, ...r) } window.candyrackEnableDebug = () => { r.ZP.setItem(a, String(!0)), i = !0, s("Enabled console output \ud83d\udd27", o.j.CANDYRACK) } }, 5639: (t, e, n) => { "use strict"; function o(t) { let e = t.shopifyProductHandleComputedInFE; if (!e) { const n = t.items.find((e => e.item_variants.some((e => e === t.shopifyProductVariantIdComputedInFE)))); n && (e = n.item_id.toString()) } return e } n.d(e, { V: () => o }) }, 8246: (t, e, n) => { "use strict"; n.d(e, { Z: () => i }); var o = n(9957); const r = []; let a = (t, e, i) => { if (0 === r.length && async function (t) { (0, o.P)("Encountered error. Loading Sentry...", t); const { init: e, withScope: i, captureException: c } = await n.e(9).then(n.bind(n, 1795)); e({ dsn: "https://bfd888898e014624a09051192a92ff6d@o187547.ingest.sentry.io/5583637", integrations: t => t.filter((t => "ReportingObserver" !== t.name && "TryCatch" !== t.name && "GlobalHandlers" !== t.name)).map((t => ("InboundFilters" === t.name && (t.ignoreErrors = ["Failed to fetch", "SecurityError", "localStorage", "fetch", "The request timed out.", "InvalidStateError", "Access is denied.", "The operation couldn\u2019t be completed", "NetworkError", "ChunkLoadError"]), t))) }), a = (t, e, n) => { n && i((t => { Object.keys(n).forEach((e => { t.setExtra(e, n[e]) })) })), c(t) }, (0, o.P)("Sentry loaded", t), r.forEach((e => { let { error: n, errorInfo: r } = e; (0, o.P)("Sending error", t, n), a(n, r) })) }(e), t instanceof Error) r.push({ error: t, errorInfo: i }); else try { r.push({ error: new Error(`Unknown error, please recheck creation: ${JSON.stringify(t)}`), errorInfo: i }) } catch (t) { r.push({ error: new Error("Unknown error, please recheck creation"), errorInfo: i }) } }; const i = a }, 2631: (t, e, n) => { "use strict"; n.d(e, { Z: () => p, c: () => f }); var o = n(2862), r = n.n(o), a = n(4717), i = n(95), c = n(5907), d = n(8246), s = n(9980), u = n(6995), l = n(5639); const f = "candyrack-tracking"; class p { constructor() { this.cartToken = void 0, this.shop = void 0, this.storage = new c.J_("sessionStorage"), this.cartToken = this.storage.getItem(f), this.shop = window.Shopify.shop } async getCartToken() { if (!this.cartToken) { const { token: t } = await (0, a.dv)(); this.cartToken = t, this.storage.setItem(f, t) } return this.cartToken } async trackView(t) { return this.track({ event_type: "view", cart_token: await this.getCartToken(), shop: this.shop, data: {}, offers: t.map((t => t.id)) }) } async trackAddToCart(t, e) { await (0, a.B1)({ candyrack_token: await this.getCartToken() }); let n = (0, l.V)(t); return this.track({ event_type: "add_to_cart", cart_token: await this.getCartToken(), shop: this.shop, offer: t.id, handle: n, data: { shopify_product_variant_id: t.shopifyProductVariantIdComputedInFE, parent_product: { id: e.id, handle: e.handle }, quantity: t.quantityComputedInFE || 1 } }) } async trackRemoveFromCart(t) { return this.track({ event_type: "remove_from_cart", cart_token: await this.getCartToken(), shop: this.shop, offer: t.id, data: {} }) } async cleanUpCandyRackStorageTrackingInformation() { if (window.Shopify.checkout) { await this.getCartToken() && ((0, s.KL)(), (0, u.cO)(), this.storage.removeItem(f)) } } track(t) { const e = (0, i.mN)(fetch("https://candyrack.digismoothie.app/api/candyrack/track-offers", { method: "POST", mode: "cors", headers: { "Content-Type": "application/json; charset=utf-8" }, body: JSON.stringify(t) })).catch((t => (0, d.Z)(t))); return r()(e, 500) } } }, 2862: t => { t.exports = function (t, e, n) { var o, r = t.constructor, a = n && n.rejectWith, i = n && n.resolveWith, c = new r((function (t, n) { o = setTimeout((function () { void 0 !== a ? n(a) : t(i) }), e) })); return r.race([c, t]).then((function (t) { return o.unref && o.unref(), t }), (function (t) { throw o.unref && o.unref(), t })) } } }, e = {}; function n(o) { var r = e[o]; if (void 0 !== r) return r.exports; var a = e[o] = { exports: {} }; return t[o](a, a.exports, n), a.exports } n.m = t, n.F = {}, n.E = t => { Object.keys(n.F).map((e => { n.F[e](t) })) }, n.H = {}, n.G = t => { Object.keys(n.H).map((e => { n.H[e](t) })) }, n.n = t => { var e = t && t.__esModule ? () => t.default : () => t; return n.d(e, { a: e }), e }, n.d = (t, e) => { for (var o in e) n.o(e, o) && !n.o(t, o) && Object.defineProperty(t, o, { enumerable: !0, get: e[o] }) }, n.f = {}, n.e = t => Promise.all(Object.keys(n.f).reduce(((e, o) => (n.f[o](t, e), e)), [])), n.u = t => "static/js/" + t + "." + { 1: "f3a577e3", 2: "cdd1dfcb", 3: "c260caba", 4: "17b9fafe", 5: "566cfcbd", 6: "729a83a8", 7: "b5fc7303", 8: "641b9bdb", 9: "37b222bf", 10: "24504acc" }[t] + ".chunk.js", n.g = function () { if ("object" === typeof globalThis) return globalThis; try { return this || new Function("return this")() } catch (t) { if ("object" === typeof window) return window } }(), n.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e), (() => { var t = {}, e = "frontend-client:"; n.l = (o, r, a, i) => { if (t[o]) t[o].push(r); else { var c, d; if (void 0 !== a) for (var s = document.getElementsByTagName("script"), u = 0; u < s.length; u++) { var l = s[u]; if (l.getAttribute("src") == o || l.getAttribute("data-webpack") == e + a) { c = l; break } } c || (d = !0, (c = document.createElement("script")).charset = "utf-8", c.timeout = 120, n.nc && c.setAttribute("nonce", n.nc), c.setAttribute("data-webpack", e + a), c.src = o), t[o] = [r]; var f = (e, n) => { c.onerror = c.onload = null, clearTimeout(p); var r = t[o]; if (delete t[o], c.parentNode && c.parentNode.removeChild(c), r && r.forEach((t => t(n))), e) return e(n) }, p = setTimeout(f.bind(null, void 0, { type: "timeout", target: c }), 12e4); c.onerror = f.bind(null, c.onerror), c.onload = f.bind(null, c.onload), d && document.head.appendChild(c) } } })(), n.r = t => { "undefined" !== typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.p = "https://candyrack.ds-cdn.com/", (() => { var t = { 0: 0 }; n.f.j = (e, o) => { var r = n.o(t, e) ? t[e] : void 0; if (0 !== r) if (r) o.push(r[2]); else { var a = new Promise(((n, o) => r = t[e] = [n, o])); o.push(r[2] = a); var i = n.p + n.u(e), c = new Error; n.l(i, (o => { if (n.o(t, e) && (0 !== (r = t[e]) && (t[e] = void 0), r)) { var a = o && ("load" === o.type ? "missing" : o.type), i = o && o.target && o.target.src; c.message = "Loading chunk " + e + " failed.\n(" + a + ": " + i + ")", c.name = "ChunkLoadError", c.type = a, c.request = i, r[1](c) } }), "chunk-" + e, e) } }, n.F.j = e => { if (!n.o(t, e) || void 0 === t[e]) { t[e] = null; var o = document.createElement("link"); n.nc && o.setAttribute("nonce", n.nc), o.rel = "prefetch", o.as = "script", o.href = n.p + n.u(e), document.head.appendChild(o) } }, n.H.j = e => { if (!n.o(t, e) || void 0 === t[e]) { t[e] = null; var o = document.createElement("link"); o.charset = "utf-8", n.nc && o.setAttribute("nonce", n.nc), o.rel = "preload", o.as = "script", o.href = n.p + n.u(e), document.head.appendChild(o) } }; var e = (e, o) => { var r, a, i = o[0], c = o[1], d = o[2], s = 0; if (i.some((e => 0 !== t[e]))) { for (r in c) n.o(c, r) && (n.m[r] = c[r]); if (d) d(n) } for (e && e(o); s < i.length; s++)a = i[s], n.o(t, a) && t[a] && t[a][0](), t[a] = 0 }, o = self.webpackJsonpCandyRack = self.webpackJsonpCandyRack || []; o.forEach(e.bind(null, 0)), o.push = e.bind(null, o.push.bind(o)) })(), (() => { var t = { 4: [3], 5: [2], 7: [1] }; n.f.prefetch = (e, o) => Promise.all(o).then((() => { var o = t[e]; Array.isArray(o) && o.map(n.E) })) })(), (() => { var t = { 6: [8], 8: [7], 10: [4] }; n.f.preload = e => { var o = t[e]; Array.isArray(o) && o.map(n.G) } })(), (() => { "use strict"; var t = n(2574), e = n(8246), o = n(9957), r = n(5767), a = n(2371), i = n(8980), c = n(4717); async function d() { if (await (0, c.dv)() && window.Shopify.checkout) try { window.Currency || await (t = "https://cdn.shopify.com/s/javascripts/currencies.js", new Promise(((e, n) => { var o = document.createElement("script"); o.onerror = t => { n(new URIError(t instanceof Event ? "The script " + t.target.src + " didn't load correctly." : "The script didn't load correctly. " + t)) }, o.onload = e, document.head.appendChild(o), o.src = t }))) } catch (e) { (0, o.H)(e) } var t } var s = n(2631); const u = t => { var n; if (null !== t && void 0 !== t && null !== (n = t.candyrack) && void 0 !== n && n.is_installed && !window.CANDYRACK_CONFIG_EXECUTED) { var a; const e = null === (a = t.candyrack.config) || void 0 === a ? void 0 : a.trim(); if (e) try { window.CANDYRACK_CONFIG_EXECUTED = !0, window.eval(e) } catch (h) { (0, o.H)("Config file contains an error", r.j.CANDYRACK) } } const c = (0, i.sp)(); if ((0, i.Xi)(t, c) && d().catch((t => (0, e.Z)(t))), (0, i.LM)(t, c)) { const t = new s.Z; t.cleanUpCandyRackStorageTrackingInformation().catch((() => { })), window.CandyRack = window.CandyRack ? { ...window.CandyRack, isLoading: !0 } : { isLoading: !0 }, l(c.shouldRender, t) } if ((0, i.a9)(t) && (window.CandyCart = window.CandyCart ? { ...window.CandyCart, isLoading: !0 } : { isLoading: !0 }, f()), (0, i.tA)(t)) { var u; if (null !== (u = t.candyrack) && void 0 !== u && u.is_installed) { (new s.Z).cleanUpCandyRackStorageTrackingInformation().catch((() => { })) } window.LastUpsell = window.LastUpsell ? { ...window.LastUpsell, isLoading: !0 } : { isLoading: !0 }, p() } }, l = (t, e) => { n.e(6).then(n.bind(n, 7276)).then((n => { let { default: o } = n; return o(t, e) })).catch((() => { (0, a.Z)(r.j.CANDYRACK, window.Shopify.shop) })) }, f = () => { Promise.resolve().then(n.bind(n, 6919)).then((t => { let { default: e } = t; return e() })).catch((() => { (0, a.Z)(r.j.CANDYCART, window.Shopify.shop) })) }, p = () => { n.e(10).then(n.bind(n, 2269)).then((t => { let { default: e } = t; return e() })).catch((() => { (0, a.Z)(r.j.LAST_UPSELL, window.Shopify.shop) })) }; var h = n(6919), m = n(6995); const y = async () => { const n = await (0, c.QW)(); var r; r = n, (0, t.Bw)(r) ? ((0, o.H)(r), (0, e.Z)({ name: "APIError: installation check", message: r.error_code }), (0, i.rm)()) : (0, t.eE)(r) ? ((0, o.H)(r), (0, i.rm)()) : u(r) }, v = document.createElement("style"); v.textContent = "\n .candyrack-body-open {\n  position: fixed !important;\n  overflow-y: scroll!important;\n  width: 100%!important;\n }\n", document.head.appendChild(v), document.addEventListener("candyrack-closed", (() => { (0, m.by)(r.j.CANDYRACK) && (window.CandyCart = window.CandyCart ? { ...window.CandyCart, isLoading: !0 } : { isLoading: !0 }, (0, h.default)(!1)) })), "complete" === document.readyState || "interactive" === document.readyState ? y() : document.addEventListener("DOMContentLoaded", y) })() })();
//# sourceMappingURL=main.js.map
//# debugId=dcbdb637-e290-5ade-919a-ef184b74a0d0
